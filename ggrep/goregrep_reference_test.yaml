regenerate_db: &regenerate_db
  strings:
    - match: // Code generated by sqlc. DO NOT EDIT.
      replacement: |
        // Code generated by sqlc. DO NOT EDIT.
        // Code regenerated by goregrep. DO NOT EDIT.

  regexps:
    - match: "(?ms)^\nimport \\(.*"
      replacement: |
        import (
          "context"

          "github.com/your/customsql"
        )

        func New(dbtxf func(context.Context) customsql.DBTx) *Queries {
          return &Queries{database: dbtxf}
        }

        type Queries struct {
          database func(context.Context) customsql.DBTx
        }

regenerate_query: &regenerate_query
  strings:
    - match: |
        // Code generated by sqlc. DO NOT EDIT.
        // source: query.sql
      replacement: |
        // Code generated by sqlc. DO NOT EDIT.
        // Code regenerated by goregrep. DO NOT EDIT.
        // source: query.sql

    - match: .db.
      replacement: .database(ctx).

    - match: QueryContext
      replacement: Query

    - match: QueryRowContext
      replacement: QueryRow
